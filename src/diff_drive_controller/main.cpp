/**
 * \author Alexander Entinger, MSC / LXRobotics
 * \copyright LXRobotics GmbH
 */

/**************************************************************************************
 * INCLUDES
 **************************************************************************************/

#include <stdlib.h>

#include <boost/bind.hpp>

#include <ros/ros.h>

#include "MD49/MD49.h"
#include "MD49/Serial.h"

/**************************************************************************************
 * GLOBAL CONSTANTS
 **************************************************************************************/

static size_t const MD49_BAUD_RATE   = 38400;

static double const T_LOOP_UPDATE_s  = 0.020;

/**************************************************************************************
 * GLOBAL VARIABLES
 **************************************************************************************/

/**************************************************************************************
 * PROTOTYPES
 **************************************************************************************/

/**************************************************************************************
 * MAIN
 **************************************************************************************/

int main(int argc, char **argv)
{
  ros::init(argc, argv, "diff_drive_controller_node");

  /* Instantiate all classes */

  ros::NodeHandle       node_handle;

  Serial                serial            ("/dev/ttyUSB0", MD49_BAUD_RATE, true);
  MD49                  md49              (serial);

  /* Setup subscribers */

  /* Run the control loop */

  ros::Rate loop_rate(1.0 / T_LOOP_UPDATE_s);

  while(ros::ok())
  {
    ros::spinOnce();

    loop_rate.sleep();
  }

  return EXIT_SUCCESS;
}

/**************************************************************************************
 * FUNCTIONS
 **************************************************************************************/

